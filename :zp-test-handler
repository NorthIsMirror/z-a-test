emulate -RL zsh
setopt extendedglob warncreateglobal typesetsilent noshortloops

[[ "$1" = plugin ]] && \
    local type="$1" user="$2" plugin="$3" id_as="$4" dir="$5" || \
    local type="$1" url="$2" id_as="$3" dir="$4"

(
    cd $dir
    if [[ -f Makefile ]]; then
        â€¦zp-test-make-targets Makefile
        if (( ${reply[(I)test]} )); then
            print -P -- "%F{38}test z-plugin: %F{154}RUNNING MAKEFILE TESTS"
            make test
        fi
    fi
    local -a farray
    farray=( **/*.zunit(N) )
    if (( ${#farray} )); then
        if type zunit >/dev/null 2>&1; then
            print -P -- "%F{38}test z-plugin: %F{154}RUNNING ZUNIT TESTS"
            zunit
        else
            print -P -- "%F{38}test z-plugin: %F{154}Please install molovo/zunit to" \
                   " run the zunit tests provided with the plugin%f"
        fi
    fi

)

# vim:ft=zsh:sw=4:sts=4:et
